<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Feedback - LumiGente</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/feedback-chat.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="js/feedback-chat.js"></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <i class="fas fa-users"></i>
                <div>
                    <h1>LumiGente</h1>
                    <p>Feedback Hub</p>
                </div>
            </div>
            
            <div class="nav-menu">
                <button class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-home"></i>
                    Dashboard
                </button>
                <button class="nav-item" data-tab="feedback">
                    <i class="fas fa-comments"></i>
                    Feedbacks
                </button>
                <button class="nav-item" data-tab="recognition">
                    <i class="fas fa-award"></i>
                    Reconhecimentos
                </button>
                <button class="nav-item" data-tab="team">
                    <i class="fas fa-users"></i>
                    Equipe
                </button>
                <button class="nav-item" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i>
                    Relatórios
                </button>
                <button class="nav-item" data-tab="humor">
                    <i class="fas fa-smile"></i>
                    Humor do Dia
                </button>
                <button class="nav-item" data-tab="objetivos">
                    <i class="fas fa-bullseye"></i>
                    Objetivos
                </button>
                <button class="nav-item" data-tab="pesquisas">
                    <i class="fas fa-poll"></i>
                    Pesquisas
                </button>
                <button class="nav-item" data-tab="avaliacoes">
                    <i class="fas fa-clipboard-check"></i>
                    Avaliações
                </button>
                <button class="nav-item" data-tab="historico" id="historico-tab">
                    <i class="fas fa-history"></i>
                    Histórico
                </button>
                <button class="nav-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    Configurações
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h2 id="page-title">Dashboard</h2>
                    <p>Sistema da Lumicenter Lighting para Feedbacks, Reconhecimentos, Avaliações e muito mais!</p>
                </div>
                <div class="header-right">
                    <button class="notification-btn" title="Logout" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                    <div class="user-info">
                        <i class="fas fa-user"></i>
                        <span>Carregando...</span>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content">
                <!-- Dashboard -->
                <div id="dashboard-content" class="tab-content">
                    <!-- Metrics -->
                    <div class="metrics-grid" style="margin-top: 0px">
                        <div class="metric-card">
                            <div class="metric-card-content">
                                <div class="metric-info">
                                    <h3><i class="fas fa-inbox" style="color: #3b82f6; margin-right: 8px;"></i>Feedbacks Recebidos</h3>
                                    <div class="value" id="feedbacks-received-count">-</div>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-card-content">
                                <div class="metric-info">
                                    <h3><i class="fas fa-star" style="color: #f59e0b; margin-right: 8px;"></i>Reconhecimentos Recebidos</h3>
                                    <div class="value" id="recognitions-received-count">-</div>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-card-content">
                                <div class="metric-info">
                                    <h3><i class="fas fa-paper-plane" style="color: #10b981; margin-right: 8px;"></i>Feedbacks Enviados</h3>
                                    <div class="value" id="feedbacks-sent-count">-</div>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-card-content">
                                <div class="metric-info">
                                    <h3><i class="fas fa-chart-line" style="color: #8b5cf6; margin-right: 8px;"></i>Pontuação Média</h3>
                                    <div class="value" id="avg-score">-</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid quick-actions-grid" style="margin-bottom: 0px">
                        <!-- Quick Actions -->
                        <div class="card">
                            <h3>
                                <i class="fas fa-bolt" style="color: #f59e0b;"></i>
                                Ações Rápidas
                            </h3>
                            <div class="action-buttons">
                                <button class="btn btn-amber" onclick="openFeedbackModal()">
                                    <i class="fas fa-plus"></i>
                                    Enviar Feedback
                                </button>
                                <button class="btn btn-amber" onclick="openRecognitionModal()">
                                    <i class="fas fa-award"></i>
                                    Reconhecer Colega
                                </button>
                                <button class="btn btn-secondary" onclick="openNewObjetivoModal()">
                                    <i class="fas fa-bullseye"></i>
                                    Novo Objetivo
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recent Recognitions -->
                        <div class="card">
                            <h3>
                                <i class="fas fa-heart" style="color: #ef4444;"></i>
                                Últimos Reconhecimentos
                            </h3>
                            <p style="color: #6b7280; font-size: 14px; margin-bottom: 16px;">
                                <i class="fas fa-info-circle"></i>
                                Mostra os últimos reconhecimentos enviados e recebidos
                            </p>
                            <div class="recognitions-list" id="recognitions-list">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando reconhecimentos...
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Gamification Dashboard -->
                    <div class="card">
                        <div class="card-header">
                            <h3>
                                <i class="fas fa-gamepad" style="color: #8b5cf6;"></i>
                                Gamificação
                            </h3>
                            <div class="gamification-stats">
                                <span class="stat-item">
                                    <i class="fas fa-star" style="color: #10b981;"></i>
                                    <span id="user-points">-</span> Pontos
                                </span>
                            </div>
                        </div>
                        <div class="gamification-content">
                            <!-- Informações do usuário logado -->
                            <div class="user-ranking-info" id="user-ranking-info" style="display: none;">
                                <div class="user-ranking-card">
                                    <div class="user-ranking-position">
                                        <i class="fas fa-medal"></i>
                                        <span id="user-position">-</span>
                                    </div>
                                    <div class="user-ranking-details">
                                        <div class="user-ranking-name">Você</div>
                                        <div class="user-ranking-points" id="user-total-points">- pontos</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Top 10 usuários -->
                            <div class="leaderboard-preview" id="leaderboard-preview">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando leaderboard...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feedback Section -->
                <div id="feedback-content" class="tab-content hidden">
                    <!-- Feedback Tabs -->
                    <div class="feedback-tabs" style="margin-bottom: 24px; border-bottom: 1px solid #e5e7eb;">
                        <div style="display: flex; gap: 24px;">
                            <button class="feedback-tab active" data-feedback-tab="received" onclick="switchFeedbackTab('received')">
                                <i class="fas fa-inbox"></i>
                                Feedbacks Recebidos
                            </button>
                            <button class="feedback-tab" data-feedback-tab="sent" onclick="switchFeedbackTab('sent')">
                                <i class="fas fa-paper-plane"></i>
                                Feedbacks Enviados
                            </button>
                        </div>
                    </div>

                    <div class="feedback-header">
                        <div class="search-filters">
                            <div class="search-box">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" class="search-input" placeholder="Buscar feedbacks..." id="feedback-search">
                            </div>
                            <div class="filter-dropdown">
                                <button class="btn btn-secondary" onclick="toggleFilters()">
                                    <i class="fas fa-filter"></i>
                                    Filtros
                                </button>
                                <div class="filter-menu hidden" id="filter-menu">
                                    <div class="filter-section">
                                        <h4>Tipo</h4>
                                        <div id="type-filters"></div>
                                    </div>
                                    <div class="filter-section">
                                        <h4>Categoria</h4>
                                        <div id="category-filters"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-amber" onclick="openFeedbackModal()">
                            <i class="fas fa-plus"></i>
                            Novo Feedback
                        </button>
                    </div>

                    <div class="feedback-list" id="feedback-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando feedbacks...
                        </div>
                    </div>
                </div>

                <!-- Development Sections -->
                <!-- Recognition Section -->
                <div id="recognition-content" class="tab-content hidden">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0;">
                                <i class="fas fa-trophy" style="color: #f59e0b;"></i>
                                Meus Reconhecimentos
                            </h3>
                            <button class="btn btn-amber" onclick="openRecognitionModal()">
                                <i class="fas fa-plus"></i>
                                Novo Reconhecimento
                            </button>
                        </div>
                        <div class="recognitions-list" id="my-recognitions-list">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando reconhecimentos...
                            </div>
                        </div>
                    </div>
                </div>

                <div id="team-content" class="tab-content hidden">
                    <div class="card">
                        <h3>
                            <i class="fas fa-users" style="color: #3b82f6;"></i>
                            Gestão de Equipe
                        </h3>
                        <p>Gerencie sua equipe, visualize métricas e acompanhe o desempenho dos colaboradores.</p>
                    </div>

                    <!-- Métricas da Equipe -->
                    <div class="dashboard-grid" style="margin-bottom: 0px">
                        <div class="card">
                            <h3>
                                <i class="fas fa-chart-line" style="color: #10b981;"></i>
                                Métricas da Equipe
                            </h3>
                            <div id="team-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando métricas...
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3>
                                <i class="fas fa-user-check" style="color: #f59e0b;"></i>
                                Status dos Colaboradores
                            </h3>
                            <div id="team-status">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando status...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Membros da Equipe -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-list" style="color: #8b5cf6;"></i>
                            Membros da Equipe
                        </h3>
                        <div class="team-filters">
                            <div class="filter-group" style="flex: 1; max-width: 500px;">
                                <label>
                                    <i class="fas fa-building"></i>
                                    Pesquisar Departamento:
                                </label>
                                <input 
                                    type="text" 
                                    id="team-department-search" 
                                    class="form-input"
                                    placeholder="Digite para buscar departamento..." 
                                    oninput="filterDepartmentSearch()"
                                    autocomplete="off"
                                />
                                <div id="department-suggestions" class="department-suggestions hidden"></div>
                            </div>
                            
                            <div class="filter-group" style="flex: 1; max-width: 500px;">
                                <label>
                                    <i class="fas fa-user-search"></i>
                                    Pesquisar Usuário:
                                </label>
                                <div class="searchable-select">
                                    <input 
                                        type="text" 
                                        class="form-input" 
                                        id="team-user-search" 
                                        placeholder="Digite para buscar colaborador..." 
                                        oninput="filterTeamUsers('team-user-search', 'team-user-list')"
                                        autocomplete="off"
                                    />
                                    <div class="select-dropdown" id="team-user-list">
                                        <div class="select-option" data-value="" onclick="selectTeamUser('', 'Todos os usuários')">
                                            Todos os usuários
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="team-selected-user" value="">
                            </div>
                            
                            <div class="filter-group" style="display: flex; flex-direction: column; gap: 8px;">
                                <label style="opacity: 0; pointer-events: none;">Ações:</label>
                                <button class="btn-clear-filters" onclick="clearTeamFilters()" title="Limpar todos os filtros">
                                    <i class="fas fa-times-circle"></i>
                                    Limpar Filtros
                                </button>
                            </div>
                        </div>
                        <div id="team-members-list">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando membros da equipe...
                            </div>
                        </div>
                    </div>
                </div>

                <div id="analytics-content" class="tab-content hidden">
                    <div class="card">
                        <h3>
                            <i class="fas fa-chart-bar" style="color: #3b82f6;"></i>
                            Relatórios e Análises
                        </h3>
                        <p>Visualize relatórios detalhados e análises sobre o engajamento e desempenho da equipe.</p>
                    </div>

                    <!-- Filtros de Período -->
                    <div class="card">
                        <div class="analytics-filters-container">
                            <div class="filter-item">
                                <label for="analytics-period">Período:</label>
                                <select id="analytics-period" class="analytics-select">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 90 dias</option>
                                    <option value="365">Último ano</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="analytics-department">Departamento:</label>
                                <select id="analytics-department" class="analytics-select">
                                    <option value="">Todos</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <button class="btn btn-amber" onclick="loadAnalytics()">
                                    <i class="fas fa-sync-alt"></i>
                                    Atualizar Dados
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Indicadores Principais -->
                    <div class="dashboard-grid">
                        <!-- Engajamento Geral -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-heart" style="color: #ef4444;"></i>
                                Engajamento Geral
                            </h3>
                            <div id="engagement-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <!-- Humor da Equipe -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-smile" style="color: #f59e0b;"></i>
                                Humor da Equipe
                            </h3>
                            <div id="mood-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <!-- Feedbacks e Reconhecimentos -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-comments" style="color: #3b82f6;"></i>
                                Feedbacks & Reconhecimentos
                            </h3>
                            <div id="feedback-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <!-- Gamificação -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-trophy" style="color: #8b5cf6;"></i>
                                Gamificação
                            </h3>
                            <div id="gamification-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <!-- Objetivos -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-target" style="color: #10b981;"></i>
                                Objetivos
                            </h3>
                            <div id="objectives-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <!-- Performance da Equipe -->
                        <div class="card" style="margin-bottom: 0px">
                            <h3>
                                <i class="fas fa-chart-line" style="color: #06b6d4;"></i>
                                Performance da Equipe
                            </h3>
                            <div id="performance-metrics">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ranking de Colaboradores -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-medal" style="color: #f59e0b;"></i>
                            Top Colaboradores da Equipe
                        </h3>
                        <div id="top-users-ranking">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando ranking...
                            </div>
                        </div>
                    </div>

                    <!-- Gráficos Detalhados -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-chart-line" style="color: #ef4444;"></i>
                            Análise Temporal
                        </h3>
                        <div id="temporal-analysis">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando análise temporal...
                            </div>
                        </div>
                    </div>

                    <!-- Relatórios Exportáveis -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-download" style="color: #059669;"></i>
                            Exportar Relatórios
                        </h3>
                        <div class="export-options">
                            <button class="btn btn-amber" onclick="exportReport('pdf')">
                                <i class="fas fa-file-pdf"></i>
                                Exportar PDF
                            </button>
                            <button class="btn btn-amber" onclick="exportReport('excel')">
                                <i class="fas fa-file-excel"></i>
                                Exportar Excel
                            </button>
                            <button class="btn btn-amber" onclick="exportReport('csv')">
                                <i class="fas fa-file-csv"></i>
                                Exportar CSV
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Humor do Dia -->
                <div id="humor-content" class="tab-content hidden">
                    <div class="card">
                        <h3>
                            <i class="fas fa-smile" style="color: #f59e0b;"></i>
                            Como está seu humor hoje?
                        </h3>
                        <div class="humor-section">
                            <div class="humor-scale">
                                <div class="humor-option" data-score="1">
                                    <i class="fas fa-frown"></i>
                                    <span>Muito Triste</span>
                                </div>
                                <div class="humor-option" data-score="2">
                                    <i class="fas fa-meh"></i>
                                    <span>Triste</span>
                                </div>
                                <div class="humor-option" data-score="3">
                                    <i class="fas fa-smile"></i>
                                    <span>Neutro</span>
                                </div>
                                <div class="humor-option" data-score="4">
                                    <i class="fas fa-laugh"></i>
                                    <span>Feliz</span>
                                </div>
                                <div class="humor-option" data-score="5">
                                    <i class="fas fa-grin-stars"></i>
                                    <span>Muito Feliz</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Descrição (opcional)</label>
                                <textarea class="form-textarea" id="humor-description" placeholder="Como você está se sentindo hoje?"></textarea>
                            </div>
                            <button class="btn btn-amber" onclick="submitHumor()">
                                <i class="fas fa-save"></i>
                                Registrar Humor
                            </button>
                        </div>
                    </div>

                    <!-- Métricas de Humor -->
                    <div class="dashboard-grid">
                        <div class="card" id="my-humor-card">
                            <h3>
                                <i class="fas fa-chart-line" style="color: #10b981;"></i>
                                Seu Humor Hoje
                            </h3>
                            <div id="my-humor-today">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>

                        <div class="card" id="company-humor-card" style="display: none;">
                            <h3>
                                <i class="fas fa-users" style="color: #3b82f6;"></i>
                                Humor da Equipe
                            </h3>
                            <div id="company-humor">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    Carregando...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Histórico de Humor -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-history" style="color: #8b5cf6;"></i>
                            Histórico de Humor
                        </h3>
                        <div id="humor-history">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando histórico...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Objetivos -->
                <div id="objetivos-content" class="tab-content hidden">
                    <div class="objetivos-header">
                        <div class="objetivos-filters">
                            <div class="search-box">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" class="search-input" placeholder="Buscar objetivos..." id="objetivos-search">
                            </div>
                            <div class="search-box">
                                <i class="fas fa-user search-icon"></i>
                                <input type="text" class="search-input" placeholder="Filtrar por responsável..." id="objetivos-responsavel-search">
                            </div>
                            <div class="search-box">
                                <i class="fas fa-filter search-icon"></i>
                                <select class="search-input" id="objetivos-status-filter" onchange="loadObjetivos()">
                                    <option value="">Todos os status</option>
                                    <option value="Ativo">Ativo</option>
                                    <option value="Agendado">Agendado</option>
                                    <option value="Concluído">Concluído</option>
                                    <option value="Expirado">Expirado</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-amber" onclick="openNewObjetivoModal()">
                            <i class="fas fa-plus"></i>
                            Novo Objetivo
                        </button>
                    </div>

                    <div class="objetivos-list" id="objetivos-list">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando objetivos...
                        </div>
                    </div>
                </div>


                <!-- Pesquisas -->
                <div id="pesquisas-content" class="tab-content hidden">
                    <div class="card">
                        <div class="card-header">
                            <h3>
                                <i class="fas fa-poll" style="color: #0d556d;"></i>
                                Sistema de Pesquisas
                            </h3>
                            <div class="pesquisas-actions">
                                <button class="btn btn-success" onclick="window.open('nova-pesquisa.html', '_blank', 'width=1200,height=800')" id="create-survey-btn" style="display: none;">
                                    <i class="fas fa-plus"></i>
                                    Nova Pesquisa
                                </button>
                                <button class="btn btn-info" onclick="window.open('pesquisas-novo.html', '_blank', 'width=1400,height=900')">
                                    <i class="fas fa-list"></i>
                                    Gerenciar Pesquisas
                                </button>
                            </div>
                        </div>
                        
                        <div class="pesquisas-overview">
                            <div class="overview-grid">
                                <div class="overview-card">
                                    <div class="overview-icon">
                                        <i class="fas fa-poll"></i>
                                    </div>
                                    <div class="overview-content">
                                        <h4>Pesquisas Ativas</h4>
                                        <span class="overview-count" id="active-surveys-count">-</span>
                                    </div>
                                </div>
                                
                                <div class="overview-card">
                                    <div class="overview-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="overview-content">
                                        <h4>Minhas Respostas</h4>
                                        <span class="overview-count" id="my-responses-count">-</span>
                                    </div>
                                </div>
                                
                                <div class="overview-card">
                                    <div class="overview-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="overview-content">
                                        <h4>Pendentes</h4>
                                        <span class="overview-count" id="pending-surveys-count">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Filtros de Pesquisas -->
                        <div class="card">
                            <div class="team-filters" style="margin-bottom: 0;">
                                <div class="filter-group" style="flex: 1; max-width: 500px;">
                                    <label>
                                        <i class="fas fa-search"></i>
                                        Pesquisar por Nome:
                                    </label>
                                    <input 
                                        type="text" 
                                        id="survey-name-search" 
                                        class="form-input"
                                        placeholder="Digite para buscar pesquisa..." 
                                        oninput="filterSurveys()"
                                        autocomplete="off"
                                    />
                                </div>
                                
                                <div class="filter-group" style="flex: 1; max-width: 300px;">
                                    <label>
                                        <i class="fas fa-filter"></i>
                                        Filtrar por Status:
                                    </label>
                                    <select id="survey-status-filter" class="form-select" onchange="filterSurveys()">
                                        <option value="">Todos</option>
                                        <option value="ativa">Ativas</option>
                                        <option value="encerrada">Encerradas</option>
                                        <option value="respondida">Respondidas</option>
                                        <option value="pendente">Sem Resposta</option>
                                    </select>
                                </div>
                                
                                <div class="filter-group" style="display: flex; flex-direction: column; gap: 8px;">
                                    <label style="opacity: 0; pointer-events: none;">Ações:</label>
                                    <button class="btn-clear-filters" onclick="clearSurveyFilters()" title="Limpar todos os filtros">
                                        <i class="fas fa-times-circle"></i>
                                        Limpar Filtros
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pesquisas-list" id="user-surveys-list">
                            <div class="loading">
                                <div class="spinner"></div>
                                Carregando pesquisas...
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Avaliações -->
                <div id="avaliacoes-content" class="tab-content hidden">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h3 style="margin: 0;">
                                    <i class="fas fa-clipboard-check" style="color: #3b82f6;"></i>
                                    Avaliações
                                </h3>
                                <p style="margin: 8px 0 0 0; color: #6b7280; font-size: 14px;">Sistema de Avaliações - O conteúdo será personalizado de acordo com seu setor e permissões.</p>
                            </div>
                            
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <!-- Botão Editar Templates - visível apenas para RH, T&D e DEPARTAMENTO ADM/RH/SESMT -->
                                <button class="btn btn-amber" id="btn-editar-templates" onclick="abrirModalEditarQuestionarios()" style="display: none;">
                                    <i class="fas fa-edit"></i>
                                    Editar Templates
                                </button>
                                
                                <!-- Botões de alternância - visível apenas para RH, T&D e DEPARTAMENTO ADM/RH/SESMT -->
                                <div id="avaliacoes-toggle-buttons" style="display: none;">
                                    <div class="btn-group" style="display: flex; gap: 8px; background: #f3f4f6; padding: 4px; border-radius: 8px;">
                                        <button class="btn-toggle active" data-view="minhas" onclick="toggleAvaliacoesView('minhas')">
                                            <i class="fas fa-user"></i>
                                            Minhas Avaliações
                                        </button>
                                        <button class="btn-toggle" data-view="todas" onclick="toggleAvaliacoesView('todas')">
                                            <i class="fas fa-list"></i>
                                            Todas as Avaliações
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Visualização: Minhas Avaliações -->
                    <div id="minhas-avaliacoes-view" class="avaliacoes-view">
                        <div class="card">
                            <h3>
                                <i class="fas fa-clipboard-list" style="color: #10b981;"></i>
                                Avaliações Pendentes
                            </h3>
                            <div style="text-align: center; padding: 40px 20px;">
                                <i class="fas fa-clipboard-list" style="font-size: 64px; color: #e5e7eb; margin-bottom: 16px;"></i>
                                <h4 style="color: #6b7280; margin-bottom: 8px;">Conteúdo em Desenvolvimento</h4>
                                <p style="color: #9ca3af;">Suas avaliações para responder aparecerão aqui.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Visualização: Todas as Avaliações (apenas para setores autorizados) -->
                    <div id="todas-avaliacoes-view" class="avaliacoes-view" style="display: none;">
                        <!-- Conteúdo dinâmico -->
                        <div id="todas-avaliacoes-conteudo">
                            <div class="card">
                                <div style="text-align: center; padding: 40px 20px;">
                                    <i class="fas fa-tasks" style="font-size: 64px; color: #e5e7eb; margin-bottom: 16px;"></i>
                                    <h4 style="color: #6b7280; margin-bottom: 8px;">Visão Administrativa</h4>
                                    <p style="color: #9ca3af;">Lista completa de todas as avaliações da empresa.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Histórico Section -->
                <div id="historico-content" class="tab-content hidden">
                    <div class="card">
                        <h3>
                            <i class="fas fa-history" style="color: #0d556d;"></i>
                            Histórico de Feedbacks - Sistema Anterior
                        </h3>
                        <p>Visualize e analise os dados históricos do sistema anterior de feedbacks da empresa.</p>
                    </div>

                    <!-- Filtros de Histórico -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-filter" style="color: #f59e0b;"></i>
                            Filtros de Pesquisa
                        </h3>
                        <div class="historico-filters">
                            <div class="filter-group">
                                <label>Período:</label>
                                <select id="historico-periodo" onchange="loadHistoricoData()">
                                    <option value="todos">Todos os Períodos</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Tipo de Relatório:</label>
                                <select id="historico-tipo" onchange="loadHistoricoData()">
                                    <option value="todos">Todos os Relatórios</option>
                                    <option value="avaliacao">Avaliação de Desempenho</option>
                                    <option value="feedback">Conteúdo de Feedbacks</option>
                                    <option value="humor">Histórico de Humor</option>
                                    <option value="colaboradores">Listagem de Colaboradores</option>
                                    <option value="medias">Médias de Feedbacks</option>
                                    <option value="ranking">Ranking de Gamificação</option>
                                    <option value="resumo">Resumo de Atividades</option>
                                    <option value="turnover">Turnovers</option>
                                    <option value="pdi">Planos de Desenvolvimento</option>
                                    <option value="pesquisas">Pesquisas Rápidas</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Departamento:</label>
                                <select id="historico-departamento" onchange="loadHistoricoData()">
                                    <option value="todos">Todos os Departamentos</option>
                                </select>
                            </div>
                        </div>
                    </div>

            <!-- Seção de Relatórios de Avaliação de Desempenho -->
            <div class="card historico-section collapsed" data-tipo="avaliacao">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-clipboard-check" style="color: #10b981;"></i>
                                    Avaliação de Desempenho por Colaborador
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('avaliacao')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="avaliacao-loading">
                                <div class="spinner"></div>
                                Carregando dados de avaliação...
                            </div>
                            <div class="historico-table" id="avaliacao-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Conteúdo de Feedbacks -->
                    <div class="card historico-section collapsed" data-tipo="feedback">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-comments" style="color: #3b82f6;"></i>
                                    Conteúdo de Feedbacks
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('feedback')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="feedback-loading">
                                <div class="spinner"></div>
                                Carregando dados de feedbacks...
                            </div>
                            <div class="historico-table" id="feedback-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Histórico de Humor -->
                    <div class="card historico-section collapsed" data-tipo="humor">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-smile" style="color: #f59e0b;"></i>
                                    Histórico de Humor
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('humor')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="humor-loading">
                                <div class="spinner"></div>
                                Carregando dados de humor...
                            </div>
                            <div class="historico-table" id="humor-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Listagem de Colaboradores -->
                    <div class="card historico-section collapsed" data-tipo="colaboradores">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-users" style="color: #8b5cf6;"></i>
                                    Listagem de Colaboradores
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('colaboradores')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="colaboradores-loading">
                                <div class="spinner"></div>
                                Carregando dados de colaboradores...
                            </div>
                            <div class="historico-table" id="colaboradores-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Médias de Feedbacks -->
                    <div class="card historico-section collapsed" data-tipo="medias">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-chart-bar" style="color: #ef4444;"></i>
                                    Médias de Feedbacks
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('medias')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="medias-loading">
                                <div class="spinner"></div>
                                Carregando dados de médias...
                            </div>
                            <div class="historico-table" id="medias-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Ranking de Gamificação -->
                    <div class="card historico-section collapsed" data-tipo="ranking">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-trophy" style="color: #f59e0b;"></i>
                                    Ranking de Gamificação
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('ranking')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="ranking-loading">
                                <div class="spinner"></div>
                                Carregando dados de ranking...
                            </div>
                            <div class="historico-table" id="ranking-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Resumo de Atividades -->
                    <div class="card historico-section collapsed" data-tipo="resumo">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-chart-line" style="color: #059669;"></i>
                                    Resumo de Atividades
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('resumo')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="resumo-loading">
                                <div class="spinner"></div>
                                Carregando dados de resumo...
                            </div>
                            <div class="historico-table" id="resumo-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Turnovers -->
                    <div class="card historico-section collapsed" data-tipo="turnover">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-user-times" style="color: #dc2626;"></i>
                                    Turnovers
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('turnover')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="turnover-loading">
                                <div class="spinner"></div>
                                Carregando dados de turnover...
                            </div>
                            <div class="historico-table" id="turnover-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Planos de Desenvolvimento Individual -->
                    <div class="card historico-section collapsed" data-tipo="pdi">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-graduation-cap" style="color: #7c3aed;"></i>
                                    Planos de Desenvolvimento Individual
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('pdi')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="pdi-loading">
                                <div class="spinner"></div>
                                Carregando dados de PDI...
                            </div>
                            <div class="historico-table" id="pdi-table" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Seção de Pesquisas Rápidas -->
                    <div class="card historico-section collapsed" data-tipo="pesquisas">
                        <div class="card-header">
                            <div class="header-content">
                                <h3>
                                    <i class="fas fa-poll" style="color: #0ea5e9;"></i>
                                    Pesquisas Rápidas
                                </h3>
                                <div class="header-actions">
                                    <button class="btn btn-amber btn-sm" onclick="exportHistoricoData('pesquisas')">
                                        <i class="fas fa-download"></i>
                                        Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="historico-table-container">
                            <div class="loading" id="pesquisas-loading">
                                <div class="spinner"></div>
                                Carregando dados de pesquisas...
                            </div>
                            <div class="historico-table" id="pesquisas-table" style="display: none;"></div>
                        </div>
                    </div>
                </div>

                <div id="settings-content" class="tab-content hidden">
                    <div class="card">
                        <h3>
                            <i class="fas fa-cog" style="color: #3b82f6;"></i>
                            Configurações
                        </h3>
                        <p>Gerencie suas preferências e configurações do sistema.</p>
                    </div>

                    <!-- Perfil do Usuário -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-user" style="color: #10b981;"></i>
                            Perfil do Usuário
                        </h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label class="form-label">Nome Completo</label>
                                <input type="text" class="form-input" id="profile-name" value="">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Apelido (como você gostaria de ser chamado)</label>
                                <input type="text" class="form-input" id="profile-nickname" placeholder="Ex: João, Maria, etc." value="">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Departamento</label>
                                <input type="text" class="form-input" id="profile-department" value="">
                            </div>
                            <button class="btn btn-amber" onclick="updateProfile()">
                                <i class="fas fa-save"></i>
                                Salvar Alterações
                            </button>
                        </div>
                    </div>

                    <!-- Alterar Senha -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-lock" style="color: #f59e0b;"></i>
                            Alterar Senha
                        </h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label class="form-label">Senha Atual</label>
                                <input type="password" class="form-input" id="current-password">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Nova Senha</label>
                                <input type="password" class="form-input" id="new-password">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirmar Nova Senha</label>
                                <input type="password" class="form-input" id="confirm-password">
                            </div>
                            <button class="btn btn-amber" onclick="changePassword()">
                                <i class="fas fa-key"></i>
                                Alterar Senha
                            </button>
                        </div>
                    </div>

                    <!-- Preferências de Notificação -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-bell" style="color: #8b5cf6;"></i>
                            Preferências de Notificação
                        </h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notify-feedback" checked>
                                    <span class="checkmark"></span>
                                    Receber notificações de novos feedbacks
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notify-recognition" checked>
                                    <span class="checkmark"></span>
                                    Receber notificações de reconhecimentos
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notify-objectives" checked>
                                    <span class="checkmark"></span>
                                    Receber lembretes de objetivos
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notify-surveys" checked>
                                    <span class="checkmark"></span>
                                    Receber notificações de novas pesquisas
                                </label>
                            </div>
                            <button class="btn btn-amber" onclick="saveNotificationPreferences()">
                                <i class="fas fa-save"></i>
                                Salvar Preferências
                            </button>
                        </div>
                    </div>

                    <!-- Configurações de Privacidade -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-shield-alt" style="color: #ef4444;"></i>
                            Privacidade
                        </h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="profile-visible" checked>
                                    <span class="checkmark"></span>
                                    Perfil visível para outros usuários
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="show-department" checked>
                                    <span class="checkmark"></span>
                                    Mostrar departamento no perfil
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="show-position" checked>
                                    <span class="checkmark"></span>
                                    Mostrar cargo no perfil
                                </label>
                            </div>
                            <button class="btn btn-amber" onclick="savePrivacySettings()">
                                <i class="fas fa-save"></i>
                                Salvar Configurações
                            </button>
                        </div>
                    </div>

                    <!-- Sobre o Sistema -->
                    <div class="card">
                        <h3>
                            <i class="fas fa-info-circle" style="color: #059669;"></i>
                            Sobre o Sistema
                        </h3>
                        <div class="about-system">
                            <p><strong>Versão:</strong> 1.0.0</p>
                            <p><strong>Desenvolvido por:</strong> Lumicenter Sistemas</p>
                            <p><strong>Última atualização:</strong> Janeiro 2025</p>
                            <p><strong>Suporte:</strong> suporte@lumicenter.com</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedback-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="margin: 0;">
                        <i class="fas fa-comment"></i>
                        Novo Feedback
                    </h3>
                    <button type="button" onclick="closeFeedbackModal()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                <div class="form-group">
                    <label class="form-label">Para quem?</label>
                    <div class="searchable-select">
                        <input type="text" class="form-input" id="feedback-to-user-search" placeholder="Digite para buscar colaborador..." oninput="filterUsers('feedback-to-user-search', 'feedback-to-user-list')">
                        <div class="select-dropdown" id="feedback-to-user-list">
                            <div class="select-option" data-value="" onclick="selectUser('', '', 'feedback-to-user')">
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="feedback-to-user" value="">
                </div>
                <div class="form-group">
                    <label class="form-label">Tipo de Feedback</label>
                    <select class="form-select" id="feedback-type">
                        <option value="Positivo">Positivo</option>
                        <option value="Desenvolvimento">Desenvolvimento</option>
                        <option value="Sugestão">Sugestão</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Categoria</label>
                    <select class="form-select" id="feedback-category">
                        <option value="Comunicação">Comunicação</option>
                        <option value="Trabalho em Equipe">Trabalho em Equipe</option>
                        <option value="Proatividade">Proatividade</option>
                        <option value="Qualidade do Trabalho">Qualidade do Trabalho</option>
                        <option value="Pontualidade">Pontualidade</option>
                        <option value="Organização">Organização</option>
                        <option value="Criatividade">Criatividade</option>
                        <option value="Resolução de Problemas">Resolução de Problemas</option>
                        <option value="Relacionamento Interpessoal">Relacionamento Interpessoal</option>
                        <option value="Comprometimento">Comprometimento</option>
                        <option value="Desenvolvimento Profissional">Desenvolvimento Profissional</option>
                        <option value="Liderança">Liderança</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Mensagem</label>
                    <textarea class="form-textarea" id="feedback-message" placeholder="Descreva seu feedback de forma construtiva..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeFeedbackModal()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="submitFeedback()">
                        <i class="fas fa-paper-plane"></i>
                        Enviar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Recognition Modal -->
    <div id="recognition-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="margin: 0;">
                        <i class="fas fa-award" style="color: #f59e0b;"></i>
                        Reconhecer Colega
                    </h3>
                    <button type="button" onclick="closeRecognitionModal()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                <div class="form-group">
                    <label class="form-label">Colaborador</label>
                    <div class="searchable-select">
                        <input type="text" class="form-input" id="recognition-to-user-search" placeholder="Digite para buscar colaborador..." oninput="filterUsers('recognition-to-user-search', 'recognition-to-user-list')">
                        <div class="select-dropdown" id="recognition-to-user-list">
                            <div class="select-option" data-value="" onclick="selectUser('', '', 'recognition-to-user')">
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="recognition-to-user" value="">
                </div>
                <div class="form-group">
                    <label class="form-label">Badge de Reconhecimento</label>
                    <div class="badge-grid">
                        <div class="badge-option badge-purple" data-badge="Inovador">Inovador</div>
                        <div class="badge-option badge-blue" data-badge="Colaborativo">Colaborativo</div>
                        <div class="badge-option badge-green" data-badge="Dedicado">Dedicado</div>
                        <div class="badge-option badge-pink" data-badge="Criativo">Criativo</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Motivo do Reconhecimento</label>
                    <textarea class="form-textarea" id="recognition-message" placeholder="Descreva o que motivou este reconhecimento..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeRecognitionModal()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="submitRecognition()">
                        <i class="fas fa-award"></i>
                        Reconhecer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Objetivo Modal -->
    <div id="objetivo-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="margin: 0;" id="objetivo-modal-title">
                        <i class="fas fa-bullseye"></i>
                        Novo Objetivo
                    </h3>
                    <button type="button" onclick="closeObjetivoModal()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                <div class="form-group">
                    <label class="form-label">Título</label>
                    <input type="text" class="form-input" id="objetivo-titulo" placeholder="Digite o título do objetivo">
                </div>
                <div class="form-group">
                    <label class="form-label">Descrição</label>
                    <textarea class="form-textarea" id="objetivo-descricao" placeholder="Descreva o objetivo..."></textarea>
                </div>
                <div class="form-group" id="responsavel-field">
                    <label class="form-label">Responsáveis</label>
                    <div class="multi-select-container">
                        <div class="searchable-select">
                            <input type="text" class="form-input" id="objetivo-responsavel-search" placeholder="Digite para buscar responsáveis..." oninput="filterUsers('objetivo-responsavel-search', 'objetivo-responsavel-list')" onfocus="if(this.value === 'Selecionar responsáveis...') this.value = ''">
                            <div class="select-dropdown" id="objetivo-responsavel-list">
                                <div class="select-option" data-value="" onclick="selectUser('', 'Selecionar responsáveis...', 'objetivo-responsavel-multi')">
                                    Selecionar responsáveis...
                                </div>
                            </div>
                        </div>
                        
                        <!-- Container para responsáveis selecionados -->
                        <div id="selected-responsaveis-container" class="selected-responsaveis" style="margin-top: 8px; min-height: 40px;"></div>
                    
                        <!-- Campos hidden para armazenar os IDs selecionados -->
                        <div id="responsaveis-selected" style="display: none;"></div>
                    </div>
                    <input type="hidden" id="objetivo-responsavel" value="">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data Início</label>
                        <input type="date" class="form-input" id="objetivo-data-inicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data Fim</label>
                        <input type="date" class="form-input" id="objetivo-data-fim">
                    </div>
                </div>
                
                <!-- Campos para Check-in (ocultos por padrão) -->
                <div id="checkin-fields" class="hidden">
                    <div class="form-group">
                        <label class="form-label">Progresso Atual (%)</label>
                        <input type="number" class="form-input" id="checkin-progresso" min="0" max="100" placeholder="Digite o progresso atual">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Observações</label>
                        <textarea class="form-textarea" id="checkin-observacoes" placeholder="Adicione observações sobre o progresso..."></textarea>
                    </div>
                </div>
                
                <!-- Campos para Detalhes (ocultos por padrão) -->
                <div id="detalhes-fields" class="hidden">
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <input type="text" class="form-input" id="objetivo-status" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Progresso Atual</label>
                        <input type="text" class="form-input" id="objetivo-progresso-atual" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Criado por</label>
                        <input type="text" class="form-input" id="objetivo-criado-por" readonly>
                    </div>
                </div>
                <div class="modal-actions" id="objetivo-modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeObjetivoModal()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" id="objetivo-submit-btn" onclick="submitObjetivo()">
                        <i class="fas fa-bullseye"></i>
                        Criar Objetivo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pesquisa Modal -->
    <div id="pesquisa-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <h3 id="pesquisa-title">
                    <i class="fas fa-poll"></i>
                    Nova Pesquisa Rápida
                </h3>
                <div class="form-group">
                    <label class="form-label">Título da Pesquisa</label>
                    <input type="text" class="form-input" id="pesquisa-titulo" placeholder="Digite o título da pesquisa">
                </div>
                <div class="form-group">
                    <label class="form-label">Descrição</label>
                    <textarea class="form-textarea" id="pesquisa-descricao" placeholder="Descreva o objetivo da pesquisa..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Pergunta</label>
                    <textarea class="form-textarea" id="pesquisa-pergunta" placeholder="Digite a pergunta da pesquisa..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Tipo de Pergunta</label>
                        <select class="form-select" id="pesquisa-tipo" onchange="toggleOpcoesField()">
                            <option value="multipla_escolha">Múltipla Escolha</option>
                            <option value="escala">Escala (1-5)</option>
                            <option value="texto_livre">Texto Livre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Departamentos Alvo</label>
                        <input type="text" class="form-input" id="pesquisa-departamentos" placeholder="Ex: TI, RH, Vendas">
                    </div>
                </div>
                <div class="form-group" id="opcoes-container" style="display: none;">
                    <label class="form-label">Opções (uma por linha)</label>
                    <textarea class="form-textarea" id="pesquisa-opcoes" placeholder="Digite cada opção em uma linha separada..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data de Início</label>
                        <input type="datetime-local" class="form-input" id="pesquisa-data-inicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Encerramento</label>
                        <input type="datetime-local" class="form-input" id="pesquisa-data-encerramento">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Pesquisa Anônima</label>
                        <select class="form-select" id="pesquisa-anonima">
                            <option value="false">Não</option>
                            <option value="true">Sim</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closePesquisaModal()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="submitPesquisa()">
                        <i class="fas fa-save"></i>
                        Criar Pesquisa
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Responder Pesquisa Modal -->
    <div id="responder-pesquisa-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <h3 id="responder-pesquisa-title">
                    <i class="fas fa-edit"></i>
                    Responder Pesquisa
                </h3>
                <div id="responder-pesquisa-content">
                    <div class="form-group">
                        <label class="form-label">Pergunta</label>
                        <p id="responder-pergunta" style="font-weight: 500; color: #374151; margin: 8px 0;"></p>
                    </div>
                    <div id="responder-opcoes-container" style="display: none;">
                        <label class="form-label">Selecione uma opção:</label>
                        <div id="responder-opcoes"></div>
                    </div>
                    <div id="responder-escala-container" style="display: none;">
                        <label class="form-label">Selecione uma nota (1-5):</label>
                        <div class="escala-options">
                            <div class="escala-option" data-score="1">
                                <span>1</span>
                                <small>Muito Ruim</small>
                            </div>
                            <div class="escala-option" data-score="2">
                                <span>2</span>
                                <small>Ruim</small>
                            </div>
                            <div class="escala-option" data-score="3">
                                <span>3</span>
                                <small>Regular</small>
                            </div>
                            <div class="escala-option" data-score="4">
                                <span>4</span>
                                <small>Bom</small>
                            </div>
                            <div class="escala-option" data-score="5">
                                <span>5</span>
                                <small>Excelente</small>
                            </div>
                        </div>
                    </div>
                    <div id="responder-texto-container" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Sua resposta:</label>
                            <textarea class="form-textarea" id="responder-resposta-texto" placeholder="Digite sua resposta..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeResponderPesquisaModal()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="submitRespostaPesquisa()">
                        <i class="fas fa-paper-plane"></i>
                        Enviar Resposta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edição de Questionários -->
    <div id="editar-questionarios-modal" class="modal-overlay hidden">
        <div class="modal modal-large">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3 style="margin: 0;">
                        <i class="fas fa-edit"></i>
                        Editar Templates de Avaliações
                    </h3>
                    <button type="button" onclick="fecharModalEditarQuestionarios()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                
                <!-- Seletor de Template -->
                <div class="form-group">
                    <label class="form-label">Selecionar Template para Editar:</label>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn-template-selector active" data-template="45" onclick="selecionarTemplateEdicao('45')">
                            <i class="fas fa-calendar-day"></i>
                            Template 45 Dias
                        </button>
                        <button class="btn-template-selector" data-template="90" onclick="selecionarTemplateEdicao('90')">
                            <i class="fas fa-calendar"></i>
                            Template 90 Dias
                        </button>
                    </div>
                </div>
                
                <!-- Lista de Perguntas -->
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <label class="form-label" style="margin: 0;">Perguntas do Questionário:</label>
                        <button class="btn btn-secondary btn-sm" onclick="adicionarNovaPergunta()">
                            <i class="fas fa-plus"></i>
                            Nova Pergunta
                        </button>
                    </div>
                    
                    <div id="lista-perguntas-edicao" class="lista-perguntas-edicao">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando perguntas...
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalEditarQuestionarios()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="salvarQuestionario()">
                        <i class="fas fa-save"></i>
                        Salvar Alterações
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Responder Avaliação -->
    <div id="responder-avaliacao-modal" class="modal-overlay hidden">
        <div class="modal modal-large">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h3 style="margin: 0;" id="titulo-avaliacao">
                        <i class="fas fa-clipboard-check"></i>
                        Responder Avaliação
                    </h3>
                    <button type="button" onclick="fecharModalResponderAvaliacao()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                
                <!-- Informações da Avaliação -->
                <div id="info-avaliacao" class="card" style="background: #f9fafb; margin-bottom: 24px;">
                    <!-- Será preenchido dinamicamente -->
                </div>
                
                <!-- Abas: Responder / Visualizar Respostas -->
                <div class="avaliacoes-tabs" style="margin-bottom: 24px; border-bottom: 1px solid #e5e7eb;">
                    <div style="display: flex; gap: 24px;">
                        <button class="avaliacao-tab active" data-avaliacao-tab="responder" onclick="trocarAbaAvaliacao('responder')" id="tab-responder">
                            <i class="fas fa-edit"></i>
                            Responder
                        </button>
                        <button class="avaliacao-tab" data-avaliacao-tab="visualizar" onclick="trocarAbaAvaliacao('visualizar')" id="tab-visualizar" style="display: none;">
                            <i class="fas fa-eye"></i>
                            Visualizar Respostas
                        </button>
                    </div>
                </div>
                
                <!-- Conteúdo: Responder -->
                <div id="aba-responder-avaliacao" class="aba-avaliacao-content">
                    <div id="formulario-avaliacao">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando questionário...
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo: Visualizar Respostas -->
                <div id="aba-visualizar-respostas" class="aba-avaliacao-content hidden">
                    <div id="respostas-avaliacao">
                        <div class="loading">
                            <div class="spinner"></div>
                            Carregando respostas...
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions" id="acoes-avaliacao">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalResponderAvaliacao()">
                        Fechar
                    </button>
                    <button type="button" class="btn btn-amber" id="btn-enviar-avaliacao" onclick="enviarRespostasAvaliacao()">
                        <i class="fas fa-paper-plane"></i>
                        Enviar Respostas
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Reabrir Avaliação -->
    <div id="reabrir-avaliacao-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="margin: 0;">
                        <i class="fas fa-redo"></i>
                        Reabrir Avaliação Expirada
                    </h3>
                    <button type="button" onclick="fecharModalReabrirAvaliacao()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                
                <p style="color: #6b7280; margin-bottom: 20px;">
                    Defina uma nova data limite para que os participantes possam responder esta avaliação.
                </p>
                
                <div class="form-group">
                    <label class="form-label">Nova Data Limite de Resposta</label>
                    <input type="date" class="form-input" id="nova-data-limite-avaliacao" required>
                </div>
                
                <input type="hidden" id="avaliacao-id-reabrir">
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalReabrirAvaliacao()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="reabrirAvaliacao()">
                        <i class="fas fa-redo"></i>
                        Reabrir Avaliação
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edição de Pergunta Individual -->
    <div id="editar-pergunta-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="margin: 0;" id="titulo-modal-pergunta">
                        <i class="fas fa-question-circle"></i>
                        Editar Pergunta
                    </h3>
                    <button type="button" onclick="fecharModalEditarPergunta()" style="background: none; border: none; color: #6b7280; cursor: pointer; padding: 10px; border-radius: 50%; transition: all 0.3s ease; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='#f3f4f6'; this.style.color='#374151'" onmouseout="this.style.background='none'; this.style.color='#6b7280'">
                        <i class="fas fa-times" style="font-size: 22px;"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Tipo de Pergunta</label>
                    <select class="form-select" id="pergunta-tipo" onchange="atualizarCamposPergunta()">
                        <option value="texto">Texto Livre</option>
                        <option value="multipla_escolha">Múltipla Escolha</option>
                        <option value="escala">Escala (1-5)</option>
                        <option value="sim_nao">Sim/Não</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Pergunta</label>
                    <textarea class="form-textarea" id="pergunta-texto" placeholder="Digite a pergunta..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="pergunta-obrigatoria" checked>
                        <span class="checkmark"></span>
                        Pergunta obrigatória
                    </label>
                </div>
                
                <!-- Campos para perguntas de escala -->
                <div id="campo-escala" class="form-group" style="display: none;">
                    <label class="form-label">Configurações da Escala:</label>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Valor Mínimo (1-10)</label>
                            <input type="number" class="form-input" id="escala-minima" value="1" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Valor Máximo (1-10)</label>
                            <input type="number" class="form-input" id="escala-maxima" value="5" min="1" max="10" required>
                        </div>
                    </div>
                    <p style="color: #6b7280; font-size: 12px; margin-top: 8px;">
                        <i class="fas fa-info-circle"></i>
                        O mínimo deve ser entre 1 e 10, e o máximo deve ser maior que o mínimo (máx: 10)
                    </p>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Label Mínimo (Opcional)</label>
                            <input type="text" class="form-input" id="escala-label-min" placeholder="Ex: Muito Ruim">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Label Máximo (Opcional)</label>
                            <input type="text" class="form-input" id="escala-label-max" placeholder="Ex: Excelente">
                        </div>
                    </div>
                </div>
                
                <!-- Campo para opções de múltipla escolha -->
                <div id="campo-opcoes-multipla" class="form-group" style="display: none;">
                    <label class="form-label">Opções de Resposta:</label>
                    <div id="lista-opcoes-edicao">
                        <!-- Opções serão adicionadas aqui dinamicamente -->
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm" onclick="adicionarOpcao()" style="margin-top: 8px;">
                        <i class="fas fa-plus"></i>
                        Adicionar Opção
                    </button>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalEditarPergunta()">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-amber" onclick="salvarPergunta()">
                        <i class="fas fa-save"></i>
                        Salvar Pergunta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts principais -->
    <script src="js/historico-config.js"></script>
    <script src="js/cache-manager.js"></script>
    <script src="js/excel-parser.js"></script>
    <script src="js/historico.js"></script>
    <script src="js/responder-avaliacao.js"></script>
    <script>
        // Inicializar sistema de chat imediatamente após carregar o script
        if (typeof FeedbackChat !== 'undefined' && typeof window.feedbackChat === 'undefined') {
            console.log('Inicializando FeedbackChat...');
            window.feedbackChat = new FeedbackChat();
            console.log('FeedbackChat inicializado:', window.feedbackChat);
        } else {
            console.log('FeedbackChat não disponível ou já inicializado');
        }
        
        // Função global para compatibilidade
        window.toggleFeedbackChat = function(feedbackId) {
            console.log('toggleFeedbackChat chamado com ID:', feedbackId);
            if (window.feedbackChat) {
                window.feedbackChat.openChat(feedbackId);
            } else {
                console.error('window.feedbackChat não está disponível');
            }
        };
    </script>
    <script src="js/index.js?v=20251001FIX3"></script>
</body>
</html>