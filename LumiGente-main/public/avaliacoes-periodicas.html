<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliações Periódicas - Lumicenter Feedback</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/avaliacoes-periodicas.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-star"></i> Sistema de Avaliações Periódicas</h1>
            <p>Avaliações de 45 e 90 dias para colaboradores</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('gestor')">
                <i class="fas fa-user-tie"></i> Gestor
            </div>
            <div class="tab" onclick="showTab('colaborador')">
                <i class="fas fa-user"></i> Colaborador
            </div>
        </div>

        <div class="content">
            <!-- TAB GESTOR -->
            <div id="tab-gestor" class="tab-content active">
                <div class="error-message" id="errorMessageGestor"></div>
                <div class="success-message" id="successMessageGestor"></div>

                                 <h2><i class="fas fa-plus-circle"></i> Criar Nova Avaliação</h2>
                 
                 <div class="template-options">
                     <h3><i class="fas fa-list-check"></i> Escolha o Template</h3>
                     <div class="template-buttons">
                         <button type="button" class="btn btn-outline-primary active" onclick="selecionarTemplate('padrao', event)">
                             <i class="fas fa-star"></i> Template Padrão (45/90 dias)
                         </button>
                         <button type="button" class="btn btn-outline-secondary" onclick="selecionarTemplate('personalizado', event)">
                             <i class="fas fa-edit"></i> Avaliação Personalizada
                         </button>
                     </div>
                     <div style="margin-top: 15px;">
                         <button type="button" class="btn btn-outline-warning" onclick="testarTemplates()">
                             <i class="fas fa-bug"></i> Testar Templates
                         </button>
                     </div>
                 </div>

                 <!-- Template Padrão -->
                 <div id="template-padrao" class="template-content" style="display: block !important;">
                     <div class="template-info">
                         <h4><i class="fas fa-info-circle"></i> Template de Avaliação de Experiência (45/90 dias)</h4>
                         <p>Este template inclui 10 perguntas organizadas em 4 categorias: Integração, Adaptação, Valores e Orientação para Resultados.</p>
                         
                         <div class="categorias-preview">
                             <div class="categoria-preview">
                                 <strong>Integração:</strong> 1 pergunta
                             </div>
                             <div class="categoria-preview">
                                 <strong>Adaptação:</strong> 3 perguntas
                             </div>
                             <div class="categoria-preview">
                                 <strong>Valores:</strong> 3 perguntas
                             </div>
                             <div class="categoria-preview">
                                 <strong>Orientação para Resultados:</strong> 3 perguntas
                             </div>
                         </div>
                         
                         <div class="perguntas-preview">
                             <h5>
                                 <i class="fas fa-eye"></i> Prévia das Perguntas do Template
                                 <span id="templateStatus" class="template-status"></span>
                             </h5>
                             <div class="perguntas-actions">
                                 <button type="button" class="btn btn-outline-primary btn-sm" onclick="mostrarPerguntasTemplate()">
                                     <i class="fas fa-eye"></i> Ver Perguntas do Template
                                 </button>
                                 <button type="button" class="btn btn-outline-warning btn-sm" onclick="editarTemplatePadrao()">
                                     <i class="fas fa-edit"></i> Editar Template
                                 </button>
                                 <button type="button" class="btn btn-outline-danger btn-sm" onclick="restaurarTemplateOriginal()" title="Restaurar template original">
                                     <i class="fas fa-undo"></i> Restaurar Original
                                 </button>
                             </div>
                             
                             <div id="perguntasTemplatePreview" style="display: none;">
                                 <div class="perguntas-lista">
                                     <div class="categoria-perguntas">
                                         <h6><i class="fas fa-handshake"></i> Integração</h6>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">1.</span>
                                             <span class="pergunta-texto">É acessível e acolhedor com todas as pessoas, tratando a todos com respeito e cordialidade.</span>
                                         </div>
                                     </div>
                                     
                                     <div class="categoria-perguntas">
                                         <h6><i class="fas fa-sync-alt"></i> Adaptação</h6>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">2.</span>
                                             <span class="pergunta-texto">É pontual no cumprimento de sua jornada de trabalho (faltas, atrasos ou saídas antecipadas).</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">3.</span>
                                             <span class="pergunta-texto">Identifica oportunidades que contribuam para o desenvolvimento do Setor.</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">4.</span>
                                             <span class="pergunta-texto">Mantém a calma frente a diversidade do ambiente e à novos desafios, buscando interagir de forma adequada às mudanças.</span>
                                         </div>
                                     </div>
                                     
                                     <div class="categoria-perguntas">
                                         <h6><i class="fas fa-heart"></i> Valores</h6>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">5.</span>
                                             <span class="pergunta-texto">É respeitoso com as pessoas contribuindo com um ambiente de trabalho saudável.</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">6.</span>
                                             <span class="pergunta-texto">Tem caráter inquestionável, age com honestidade e integridade no relacionamento com gestores, colegas, prestadores de serviço, fornecedores e demais profissionais que venha a ter contato na empresa.</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">7.</span>
                                             <span class="pergunta-texto">Exerce suas atividades com transparência e estrita observância às leis, aos princípios e as diretrizes da empresa.</span>
                                         </div>
                                     </div>
                                     
                                     <div class="categoria-perguntas">
                                         <h6><i class="fas fa-target"></i> Orientação para Resultados</h6>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">8.</span>
                                             <span class="pergunta-texto">Mantém a produtividade e a motivação diante de situações sobre pressão.</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">9.</span>
                                             <span class="pergunta-texto">Age com engajamento para atingir os objetivos e metas.</span>
                                         </div>
                                         <div class="pergunta-item">
                                             <span class="pergunta-numero">10.</span>
                                             <span class="pergunta-texto">Capacidade para concretizar as tarefas que lhe são solicitadas, com o alcance de objetivos e de forma comprometida com o resultado de seu Setor.</span>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             
                             <!-- Editor de Template Padrão -->
                             <div id="editorTemplatePadrao" style="display: none;">
                                 <h6><i class="fas fa-edit"></i> Editor de Template</h6>
                                 <p class="text-muted">Edite as perguntas do template padrão conforme necessário:</p>
                                 
                                 <div id="perguntasEditaveis">
                                     <!-- As perguntas editáveis serão inseridas aqui via JavaScript -->
                                 </div>
                                 
                                 <div class="editor-actions">
                                     <button type="button" class="btn btn-success btn-sm" onclick="salvarTemplateEditado()">
                                         <i class="fas fa-save"></i> Salvar Template Editado
                                     </button>
                                     <button type="button" class="btn btn-secondary btn-sm" onclick="cancelarEdicaoTemplate()">
                                         <i class="fas fa-times"></i> Cancelar
                                     </button>
                                 </div>
                             </div>
                         </div>
                     </div>
                     
                     <form id="formCriarAvaliacao">
                                                   <div class="form-row">
                              <div class="form-group">
                                  <label for="colaborador">Colaborador *</label>
                                  <div class="searchable-select">
                                      <input type="text" class="form-input" id="colaborador-search" placeholder="Digite para buscar colaborador..." oninput="filterColaboradores('colaborador-search', 'colaborador-list')" readonly>
                                      <div class="select-dropdown" id="colaborador-list">
                                          <div class="select-option" data-value="" onclick="selectColaborador('', 'Selecionar colaborador...', 'colaborador')">
                                              Selecionar colaborador...
                                          </div>
                                      </div>
                                  </div>
                                  <input type="hidden" id="colaborador" name="colaborador_id" value="" required>
                              </div>
                             
                             <div class="form-group">
                                 <label for="tipoAvaliacao">Tipo de Avaliação *</label>
                                 <select id="tipoAvaliacao" name="tipo_avaliacao" required>
                                     <option value="">Selecione o tipo...</option>
                                     <option value="45_dias">45 Dias</option>
                                     <option value="90_dias">90 Dias</option>
                                 </select>
                             </div>
                         </div>

                         <div class="form-row">
                             <div class="form-group">
                                 <label for="dataLimite">Data Limite *</label>
                                 <input type="datetime-local" id="dataLimite" name="data_limite" required>
                             </div>
                             
                             <div class="form-group">
                                 <label for="observacoes">Observações Iniciais</label>
                                 <textarea id="observacoes" name="observacoes_gestor" rows="3" placeholder="Observações iniciais do gestor..."></textarea>
                             </div>
                         </div>

                         <div class="form-group">
                             <button type="submit" class="btn btn-primary">
                                 <i class="fas fa-save"></i> Criar Avaliação com Template Padrão
                             </button>
                         </div>
                     </form>
                 </div>

                 <!-- Template Personalizado -->
                 <div id="template-personalizado" class="template-content" style="display: none !important;">
                     <div class="template-info">
                         <h4><i class="fas fa-edit"></i> Criar Avaliação Personalizada</h4>
                         <p>Crie suas próprias perguntas e categorias para avaliações específicas.</p>
                     </div>
                     
                     <form id="formAvaliacaoPersonalizada">
                                                   <div class="form-row">
                              <div class="form-group">
                                  <label for="colaboradorPersonalizado">Colaborador *</label>
                                  <div class="searchable-select">
                                      <input type="text" class="form-input" id="colaboradorPersonalizado-search" placeholder="Digite para buscar colaborador..." oninput="filterColaboradores('colaboradorPersonalizado-search', 'colaboradorPersonalizado-list')" readonly>
                                      <div class="select-dropdown" id="colaboradorPersonalizado-list">
                                          <div class="select-option" data-value="" onclick="selectColaborador('', 'Selecionar colaborador...', 'colaboradorPersonalizado')">
                                              Selecionar colaborador...
                                          </div>
                                      </div>
                                  </div>
                                  <input type="hidden" id="colaboradorPersonalizado" name="colaborador_id" value="" required>
                              </div>
                             
                             <div class="form-group">
                                 <label for="tipoAvaliacaoPersonalizado">Tipo de Avaliação *</label>
                                 <select id="tipoAvaliacaoPersonalizado" name="tipo_avaliacao" required>
                                     <option value="">Selecione o tipo...</option>
                                     <option value="45_dias">45 Dias</option>
                                     <option value="90_dias">90 Dias</option>
                                     <option value="personalizado">Personalizado</option>
                                 </select>
                             </div>
                         </div>

                         <div class="form-row">
                             <div class="form-group">
                                 <label for="dataLimitePersonalizado">Data Limite *</label>
                                 <input type="datetime-local" id="dataLimitePersonalizado" name="data_limite" required>
                             </div>
                             
                             <div class="form-group">
                                 <label for="observacoesPersonalizado">Observações Iniciais</label>
                                 <textarea id="observacoesPersonalizado" name="observacoes_gestor" rows="3" placeholder="Observações iniciais do gestor..."></textarea>
                             </div>
                         </div>

                         <div class="form-group">
                             <label for="tituloAvaliacao">Título da Avaliação *</label>
                             <input type="text" id="tituloAvaliacao" name="titulo" placeholder="Ex: Avaliação de Desempenho Trimestral" required>
                         </div>

                         <div class="form-group">
                             <label for="descricaoAvaliacao">Descrição da Avaliação</label>
                             <textarea id="descricaoAvaliacao" name="descricao" rows="3" placeholder="Descreva o objetivo desta avaliação..."></textarea>
                         </div>

                         <div class="form-group">
                             <button type="button" class="btn btn-outline-primary" onclick="adicionarPergunta()">
                                 <i class="fas fa-plus"></i> Adicionar Pergunta
                             </button>
                         </div>

                         <div id="perguntasContainer">
                             <!-- Perguntas personalizadas serão adicionadas aqui -->
                         </div>

                         <div class="form-group">
                             <button type="submit" class="btn btn-success">
                                 <i class="fas fa-save"></i> Criar Avaliação Personalizada
                             </button>
                         </div>
                     </form>
                 </div>

                <hr style="margin: 40px 0; border: 1px solid #e1e5e9;">

                <h2><i class="fas fa-list"></i> Avaliações Pendentes</h2>
                
                <div class="loading" id="loadingGestor">
                    <div class="spinner"></div>
                    <p>Carregando avaliações...</p>
                </div>

                <div id="avaliacoesGestor" class="avaliacoes-grid">
                    <!-- Avaliações serão carregadas aqui -->
                </div>
            </div>

            <!-- TAB COLABORADOR -->
            <div id="tab-colaborador" class="tab-content">
                <div class="error-message" id="errorMessageColaborador"></div>
                <div class="success-message" id="successMessageColaborador"></div>

                <h2><i class="fas fa-clipboard-check"></i> Minhas Avaliações</h2>
                
                <div class="loading" id="loadingColaborador">
                    <div class="spinner"></div>
                    <p>Carregando avaliações...</p>
                </div>

                <div id="avaliacoesColaborador" class="avaliacoes-grid">
                    <!-- Avaliações serão carregadas aqui -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/avaliacoes-periodicas.js"></script>
</body>
</html>
